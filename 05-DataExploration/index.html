<!DOCTYPE html>
<html>
<head>
  <title>Data</title>
  <meta charset="utf-8">
  <meta name="description" content="Data">
  <meta name="author" content="Ben Weinstein">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/IR_BLACK.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.css">
<link rel="stylesheet" href = "libraries/widgets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href = "assets/css/ribbons.css">
<link rel="stylesheet" href = "assets/css/slidify.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <hgroup class="auto-fadein">
        <h1>Data</h1>
        <h2>Import, exploration, and plotting</h2>
        <p>Ben Weinstein<br/></p>
      </hgroup>
          </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><img src="http://thedataqualitychronicle.org/wp-content/uploads/2013/05/Big-Data.jpg" alt="Drawing" style="width: 400px;"/> </p>

<p>As scientists, our major currency is data. R provides a common ground for data analysis. Using R for data visualization, exploration, and analysis opens up a massive set of tools. </p>

<p>You will find that nothing, absolutely nothing, you will do has not been atleast tried before. There are packages covering every imaginable type of ecological, evolutionary, and statiscal approaches. Today we will discuss how to read in data, perform basic functions, and produce figures. </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h1>Tips for Importing Data</h1>
  </hgroup>
  <article>
    <p>R is not a spreadsheet application. Enter data in excel or access, and export it to R for analysis. </p>

<p>Data is easiest to read in a .csv format, in excel, save as -&gt; comma seperated csv. </p>

<p>Avoid Spaces, Special Characters, or hanging lines of data.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <pre><code class="r">traits &lt;- read.csv(&quot;C:/Users/Ben/Documents/GitHub/IntroR/05-DataExploration/Traits.csv&quot;, 
    row.names = 1)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <!-- html table generated in R 3.0.2 by xtable 1.7-1 package -->

<!-- Mon Feb 17 14:02:47 2014 -->

<TABLE border=1>
<TR> <TH>  </TH> <TH> Clade </TH> <TH> Genus </TH> <TH> Species </TH> <TH> double </TH> <TH> English </TH> <TH> Bill </TH> <TH> Mass </TH> <TH> WingChord </TH>  </TR>
  <TR> <TD align="right"> 1 </TD> <TD> Coquettes </TD> <TD> Adelomyia </TD> <TD> melanogenys </TD> <TD> Adelomyia melanogenys </TD> <TD> Speckled Hummingbird </TD> <TD align="right"> 15.04 </TD> <TD align="right"> 4.25 </TD> <TD align="right"> 55.87 </TD> </TR>
  <TR> <TD align="right"> 2 </TD> <TD> Brilliant </TD> <TD> Aglaeactis </TD> <TD> cupripennis </TD> <TD> Aglaeactis cupripennis </TD> <TD> Shining Sunbeam </TD> <TD align="right"> 18.71 </TD> <TD align="right"> 8.44 </TD> <TD align="right"> 85.62 </TD> </TR>
  <TR> <TD align="right"> 3 </TD> <TD> Coquettes </TD> <TD> Aglaiocercus </TD> <TD> coelestis </TD> <TD> Aglaiocercus coelestis </TD> <TD> Violet-tailed Sylph </TD> <TD align="right"> 16.25 </TD> <TD align="right"> 6.07 </TD> <TD align="right"> 68.68 </TD> </TR>
  <TR> <TD align="right"> 4 </TD> <TD> Coquettes </TD> <TD> Aglaiocercus </TD> <TD> kingi </TD> <TD> Aglaiocercus kingi </TD> <TD> Long-tailed Sylph </TD> <TD align="right"> 15.77 </TD> <TD align="right"> 5.53 </TD> <TD align="right"> 67.12 </TD> </TR>
  <TR> <TD align="right"> 5 </TD> <TD> Emerald </TD> <TD> Amazilia </TD> <TD> amazilia </TD> <TD> Amazilia amazilia </TD> <TD> Amazilia Hummingbird </TD> <TD align="right"> 18.54 </TD> <TD align="right"> 4.07 </TD> <TD align="right"> 53.33 </TD> </TR>
  <TR> <TD align="right"> 6 </TD> <TD> Emerald </TD> <TD> Amazilia </TD> <TD> castaneiventris </TD> <TD> Amazilia castaneiventris </TD> <TD> Chestnut-bellied Hummingbird </TD> <TD align="right"> 18.70 </TD> <TD align="right"> 4.75 </TD> <TD align="right"> 52.70 </TD> </TR>
   </TABLE>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    <h2>Data Explortation</h2>
  </hgroup>
  <article>
    <p>It is critical to consider your data carefully. Are they categorical, are they numeric, how much variance is there? Are they complete?
For categorical data, the best place to start are contingency tables
How many speccies per clades are there?
For continues data, try <em>range</em>, <em>sd</em> <em>mean</em></p>

<pre><code class="r">table(traits$Clade)
</code></pre>

<pre><code>## 
##       Bee Brilliant Coquettes   Emerald    Hermit    Mangoe     MtGem 
##         5        37        27        34        22        13         1 
##  Patagona   Topazes 
##         1         1
</code></pre>

<pre><code class="r">mean(traits$Bill)
</code></pre>

<pre><code>## [1] 21.41
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2><strong>Try It!</strong></h2>
  </hgroup>
  <article>
    <ol>
<li>What are the range of body sizes? </li>
<li>Which genus has the most species?</li>
<li>Look up the which.max function; read the help screen; which species has the longest bill?</li>
<li>Create a two way table of genus and clade, what does this show?</li>
</ol>

<p><img src="http://www.discoverlife.org/IM/I_LHT/0031/320/Ensifera_ensifera,Sword-billed_Hummingbird,I_LHT3117.jpg" alt="Ensifera ensifera"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-7" style="background:;">
  <hgroup>
    <h2>ggplot2</h2>
  </hgroup>
  <article>
    <p>The ggplot library is the gold-standard for plotting. It allows basic, intuitive, plots that can be endlessly customized. The help screens are full of clear examples, and there is a massive online community to search basic plotting questions. Let&#39;s explore our first plot.</p>

<pre><code class="r">library(ggplot2)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    
<div style='float:left;width:48%;' class='centered'>
  <pre><code class="r">ggplot(traits, aes(x = WingChord, y = Mass)) + geom_point()
</code></pre>

<p><img src="figure/unnamed-chunk-5.png" alt="plot of chunk unnamed-chunk-5"> </p>


</div>
<div style='float:right;width:48%;'>
  <ul>
<li>   <strong>Parsed</strong>: Create a plot from the data frame traits, with matching the datatype and properties of the column WingChord on the x axis, and Mass on the Y axis. Add points. </li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p>For now, we will always be setting global aesthestics inside the <em>ggplot()</em> and not the <em>geom_point()</em>.</p>

<pre><code class="r">ggplot(traits, aes(x = Clade, y = Mass)) + geom_point()
</code></pre>

<p><img src="figure/unnamed-chunk-6.png" alt="plot of chunk unnamed-chunk-6"> </p>

<pre><code class="r"># What if we want something besides points
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p>There are many geom styles type <strong>geom_</strong> and hit tab to see types, and then get help using ?geom_nameofgeom </p>

<pre><code class="r">ggplot(traits, aes(x = Clade, y = Mass)) + geom_boxplot()
</code></pre>

<p><img src="figure/unnamed-chunk-7.png" alt="plot of chunk unnamed-chunk-7"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2>Building more complex plots</h2>
  </hgroup>
  <article>
    
<div style='float:left;width:48%;' class='centered'>
  <ul>
<li><strong>Continious colors can be added (and edited) to add more information</strong></li>
<li><strong>Parsed</strong>: Create a plot from the data frame <em>traits</em>. The x axis is the column <em>Mass</em>, the y axis is the column <em>WingChord</em>, color the data by the continious variable column <em>Bill</em>. Add points. </li>
</ul>


</div>
<div style='float:right;width:48%;'>
  <pre><code class="r">p &lt;- ggplot(traits, aes(x = Mass, y = WingChord, color = Bill))
p + geom_point()
</code></pre>

<p><img src="figure/unnamed-chunk-8.png" alt="plot of chunk unnamed-chunk-8"> </p>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h1>Building even more complex plots</h1>
  </hgroup>
  <article>
    <p>Shapes and sizes can be added as well, note how ggplot automatically groups by both variables. In this case we have a bit too many to make it helpful, but it depends on your data.</p>


<div style='float:left;width:48%;' class='centered'>
  <ul>
<li><strong>Parsed</strong>:Create a plot from the dataframe traits, with Mass on the x axis, WingChord on the y. Color the data by the continious variable Bill, and add shapes to the data based on the categorical data Clade. Add points. </li>
</ul>


</div>
<div style='float:right;width:48%;'>
  <pre><code class="r">ggplot(traits, aes(x = Mass, y = WingChord, color = Bill, shape = Clade)) + 
    geom_point()
</code></pre>

<p><img src="figure/unnamed-chunk-9.png" alt="plot of chunk unnamed-chunk-9"> </p>

<p>-ggplot is very smart. Trust it.</p>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p>Shapes and sizes can be added as well, note how ggplot automatically groups by both variables. In this case we have a bit too many to make it helpful, but it depends on your data.</p>

<pre><code class="r">ggplot(traits, aes(x = Bill, y = WingChord, color = Clade, size = Mass)) + geom_point()
</code></pre>

<p><img src="figure/unnamed-chunk-10.png" alt="plot of chunk unnamed-chunk-10"> </p>

<p>ggplot is very smart. Trust it.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2><strong>Try it!</strong></h2>
  </hgroup>
  <article>
    <ol>
<li>Plot <strong>Bill</strong> as a function of <strong>Wingchord</strong>, save it as object p</li>
<li>Plot <strong>Bill</strong> against clade, which clade has the lowest median bill size?</li>
<li>Look up geom_histogram, what does it go? made a histogram of <strong>Bill</strong> sizes.</li>
<li>Color your histogram by clade, which clade does the outlier belong to?</li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Adding multiple geometries to a plot</h2>
  </hgroup>
  <article>
    <p>Often we want to express more information than a single geometric object, ggplot allows us immense flexiblity by allowing us to build on our initial plot</p>

<pre><code class="r">ggplot(traits, aes(x = Mass, y = Bill)) + geom_point() + geom_smooth()
</code></pre>

<p><img src="figure/unnamed-chunk-11.png" alt="plot of chunk unnamed-chunk-11"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h1>Practice plotting</h1>
  </hgroup>
  <article>
    <p>To show some more features, let&#39;s make a bit smaller dataset</p>

<p>Given a bit smaller dataset, we can explore more options, add both color and shape, drawing on what we&#39;ve done already, how would we subset our data to just get the coquettes clades?</p>

<p><img src="http://www.birdforum.net/opus/images/1/1c/P1490597_filtered.jpg" alt="Bearded HelmetCrest"></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-17" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <pre><code class="r">coq &lt;- droplevels(traits[traits$Clade == &quot;Coquettes&quot;, ])
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h1>Text can be added, and manipulated directly</h1>
  </hgroup>
  <article>
    <pre><code class="r">ggplot(coq, aes(x = Bill, y = WingChord, size = Mass, label = Genus)) + geom_point() + 
    geom_text(size = 3)
</code></pre>

<p><img src="figure/unnamed-chunk-13.png" alt="plot of chunk unnamed-chunk-13"> </p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-19" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p>Data can be facetted into panels</p>

<pre><code class="r">ggplot(coq, aes(x = Species, y = WingChord, col = Bill, size = Mass)) + geom_point() + 
    facet_grid(~Genus, scales = &quot;free&quot;) + theme(axis.text.x = element_text(angle = -90)) + 
    scale_color_continuous(low = &quot;blue&quot;, high = &quot;red&quot;) + ylab(&quot;Wing Length&quot;)
</code></pre>

<p><img src="figure/unnamed-chunk-14.png" alt="plot of chunk unnamed-chunk-14"> </p>

<p><strong>Parsed</strong>: Plot the dataframe coq, with Species on the x axis, with WingChord on the y axis, color the data by Bill size, and adjust the size of the data based on Mass. Add points. Create a panel for each Genus, make the x axis different for each panel. Rotate the x axis labels by 90degrees. Change the color of the Bill size from blue to red. Label the y axis &quot;Wing length&quot;</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h1>10min Group Assignment</h1>
  </hgroup>
  <article>
    <p>Choose one of the following challenges.</p>

<ol>
<li><p>Create a paneled ggplot figure using facet_wrap() that shows the allometric relationship between mass and wingchord for each clade. Add a <strong>linear</strong> smoothing line following the instructions in stat_smooth()</p></li>
<li><p>Does the number of species in a genus relate to the variance in body size?</p></li>
</ol>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h1>Exporting Dataframes</h1>
  </hgroup>
  <article>
    <p>If we want to export the data that we created, we can save it to file as a csv</p>

<pre><code class="r">write.csv(coq, &quot;Coquettes.csv&quot;)
</code></pre>

<style>
pre {
  margin-bottom: -12px;
}
</style>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<script src='libraries/widgets/bootstrap/js/bootstrap.min.js'></script>
<script>  
$(function (){ 
  $("#example").popover(); 
  $("[rel='tooltip']").tooltip(); 
});  
</script>  
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>